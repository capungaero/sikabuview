<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Sikabuview - Manajemen Penginapan</title>
    <link rel="stylesheet" href="css/style-new.css">
    <link rel="stylesheet" href="css/print.css" media="print">
    <!-- Font Awesome untuk icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1><i class="fas fa-hotel"></i> Sikabuview</h1>
                <p>Manajemen Penginapan</p>
            </div>

            <nav class="sidebar-nav">
                <!-- Dashboard Section -->
                <div class="nav-section">
                    <h4 class="nav-section-title"><i class="fas fa-chart-line"></i> DASHBOARD</h4>
                    <ul>
                        <li><a href="#dashboard" data-tab="dashboard" class="active"><i class="fas fa-home"></i> Overview</a></li>
                    </ul>
                </div>

                <!-- Operations Section -->
                <div class="nav-section">
                    <h4 class="nav-section-title"><i class="fas fa-tasks"></i> OPERASIONAL</h4>
                    <ul>
                        <li><a href="#booking" data-tab="booking"><i class="fas fa-calendar-plus"></i> Booking</a></li>
                        <li><a href="#checkin" data-tab="checkin"><i class="fas fa-door-open"></i> Check-in/out</a></li>
                        <li><a href="#payment" data-tab="payment"><i class="fas fa-credit-card"></i> Pembayaran</a></li>
                        <li><a href="#housekeeping" data-tab="housekeeping"><i class="fas fa-broom"></i> Housekeeping</a></li>
                    </ul>
                </div>

                <!-- Data Management Section -->
                <div class="nav-section">
                    <h4 class="nav-section-title"><i class="fas fa-database"></i> DATA & MASTER</h4>
                    <ul>
                        <li><a href="#rooms" data-tab="rooms"><i class="fas fa-bed"></i> Kamar & Harga</a></li>
                        <li><a href="#guests" data-tab="guests"><i class="fas fa-users"></i> Data Tamu</a></li>
                        <li><a href="#calendar" data-tab="calendar"><i class="fas fa-calendar-alt"></i> Kalender</a></li>
                    </ul>
                </div>

                <!-- Reports Section -->
                <div class="nav-section">
                    <h4 class="nav-section-title"><i class="fas fa-chart-bar"></i> LAPORAN</h4>
                    <ul>
                        <li><a href="#finance" data-tab="finance"><i class="fas fa-coins"></i> Keuangan</a></li>
                        <li><a href="#reports" data-tab="reports"><i class="fas fa-file-alt"></i> Laporan</a></li>
                        <li><a href="#data" data-tab="data"><i class="fas fa-download"></i> Data Management</a></li>
                    </ul>
                </div>
            </nav>

            <div class="sidebar-footer">
                <button class="btn-mobile-toggle" id="mobile-toggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header -->
            <header class="main-header">
                <h2 id="current-page-title">Dashboard Overview</h2>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="window.print()">
                        <i class="fas fa-print"></i> Print
                    </button>
                </div>
            </header>

            <!-- Dashboard Section -->
            <section id="dashboard" class="tab-content active">
                <div class="dashboard-cards">
                    <div class="card stat-card">
                        <div class="card-icon blue">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="card-content">
                            <h3>Booking Hari Ini</h3>
                            <p class="stat-number" id="today-bookings">0</p>
                        </div>
                    </div>
                    <div class="card stat-card">
                        <div class="card-icon green">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="card-content">
                            <h3>Pendapatan Bulan Ini</h3>
                            <p class="stat-number" id="monthly-income">Rp 0</p>
                        </div>
                    </div>
                    <div class="card stat-card">
                        <div class="card-icon orange">
                            <i class="fas fa-door-open"></i>
                        </div>
                        <div class="card-content">
                            <h3>Kamar Terisi</h3>
                            <p class="stat-number" id="occupied-rooms">0</p>
                        </div>
                    </div>
                    <div class="card stat-card">
                        <div class="card-icon purple">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="card-content">
                            <h3>Total Tamu</h3>
                            <p class="stat-number" id="total-guests">0</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-line"></i> Grafik Pendapatan</h3>
                        </div>
                        <div class="card-body">
                            <canvas id="revenue-chart" width="400" height="200"></canvas>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-list"></i> Aktivitas Terbaru</h3>
                        </div>
                        <div class="card-body">
                            <div id="recent-activities">
                                <p>Tidak ada aktivitas terbaru</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Booking Section -->
            <section id="booking" class="tab-content">
                <div class="module-header">
                    <h2><i class="fas fa-calendar-plus"></i> Modul Booking</h2>
                    <div class="module-actions">
                        <button class="btn btn-primary" onclick="showAddBookingForm()">
                            <i class="fas fa-plus"></i> Tambah Booking
                        </button>
                        <button class="btn btn-secondary" onclick="printBookingReport()">
                            <i class="fas fa-print"></i> Cetak Laporan
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <div class="table-container">
                            <table id="booking-table">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Tamu</th>
                                        <th>Check-in</th>
                                        <th>Check-out</th>
                                        <th>Kamar</th>
                                        <th>Status</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="booking-list">
                                    <tr>
                                        <td colspan="7" class="text-center">Tidak ada data booking</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Check-in/out Section -->
            <section id="checkin" class="tab-content">
                <div class="module-header">
                    <h2><i class="fas fa-door-open"></i> Check-in & Check-out</h2>
                    <div class="module-actions">
                        <button class="btn btn-primary">
                            <i class="fas fa-sign-in-alt"></i> Check-in
                        </button>
                        <button class="btn btn-secondary">
                            <i class="fas fa-sign-out-alt"></i> Check-out
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-list"></i> Daftar Check-in/out Hari Ini</h3>
                    </div>
                    <div class="card-body">
                        <p>Fitur check-in dan check-out akan ditampilkan di sini</p>
                    </div>
                </div>
            </section>

            <!-- Payment Section -->
            <section id="payment" class="tab-content">
                <div class="module-header">
                    <h2><i class="fas fa-credit-card"></i> Manajemen Pembayaran</h2>
                    <div class="module-actions">
                        <button class="btn btn-primary">
                            <i class="fas fa-plus"></i> Proses Pembayaran
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-list"></i> Riwayat Pembayaran</h3>
                    </div>
                    <div class="card-body">
                        <p>Daftar pembayaran akan ditampilkan di sini</p>
                    </div>
                </div>
            </section>

            <!-- Housekeeping Section -->
            <section id="housekeeping" class="tab-content">
                <div class="module-header">
                    <h2><i class="fas fa-broom"></i> Manajemen Housekeeping</h2>
                    <div class="module-actions">
                        <button class="btn btn-primary">
                            <i class="fas fa-plus"></i> Tambah Tugas
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-tasks"></i> Daftar Tugas Cleaning</h3>
                    </div>
                    <div class="card-body">
                        <p>Daftar tugas housekeeping akan ditampilkan di sini</p>
                    </div>
                </div>
            </section>

            <!-- Rooms Section -->
            <section id="rooms" class="tab-content">
                <div class="module-header">
                    <h2><i class="fas fa-bed"></i> Konfigurasi Kamar & Harga</h2>
                    <div class="module-actions">
                        <button class="btn btn-primary">
                            <i class="fas fa-plus"></i> Tambah Kamar
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-list"></i> Daftar Kamar</h3>
                    </div>
                    <div class="card-body">
                        <p>Daftar kamar dan villa akan ditampilkan di sini</p>
                    </div>
                </div>
            </section>

            <!-- Guests Section -->
            <section id="guests" class="tab-content">
                <div class="module-header">
                    <h2><i class="fas fa-users"></i> Database Tamu</h2>
                    <div class="module-actions">
                        <button class="btn btn-primary">
                            <i class="fas fa-plus"></i> Registrasi Tamu
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-list"></i> Daftar Tamu</h3>
                    </div>
                    <div class="card-body">
                        <p>Database tamu akan ditampilkan di sini</p>
                    </div>
                </div>
            </section>

            <!-- Calendar Section -->
            <section id="calendar" class="tab-content">
                <div class="module-header">
                    <h2><i class="fas fa-calendar-alt"></i> Kalender Ketersediaan</h2>
                    <div class="module-actions">
                        <button class="btn btn-primary">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-calendar"></i> Kalender Booking</h3>
                    </div>
                    <div class="card-body">
                        <p>Kalender ketersediaan kamar akan ditampilkan di sini</p>
                    </div>
                </div>
            </section>

            <!-- Finance Section -->
            <section id="finance" class="tab-content">
                <div class="module-header">
                    <h2><i class="fas fa-coins"></i> Modul Keuangan</h2>
                    <div class="module-actions">
                        <button class="btn btn-primary">
                            <i class="fas fa-plus"></i> Tambah Transaksi
                        </button>
                    </div>
                </div>

                <div class="finance-cards">
                    <div class="finance-card income">
                        <div class="finance-icon">
                            <i class="fas fa-arrow-up"></i>
                        </div>
                        <div class="finance-content">
                            <h3>Total Pendapatan</h3>
                            <p class="amount" id="total-income">Rp 0</p>
                            <small><i class="fas fa-chart-line"></i> 0 transaksi</small>
                        </div>
                    </div>
                    <div class="finance-card expense">
                        <div class="finance-icon">
                            <i class="fas fa-arrow-down"></i>
                        </div>
                        <div class="finance-content">
                            <h3>Total Pengeluaran</h3>
                            <p class="amount" id="total-expense">Rp 0</p>
                            <small><i class="fas fa-shopping-cart"></i> 0 transaksi</small>
                        </div>
                    </div>
                    <div class="finance-card profit">
                        <div class="finance-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="finance-content">
                            <h3>Keuntungan Bersih</h3>
                            <p class="amount" id="net-profit">Rp 0</p>
                            <small><i class="fas fa-percentage"></i> 0% margin</small>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="tab-content">
                <div class="module-header">
                    <h2><i class="fas fa-chart-bar"></i> Laporan & Analytics</h2>
                    <div class="module-actions">
                        <button class="btn btn-primary">
                            <i class="fas fa-chart-line"></i> Generate Laporan
                        </button>
                    </div>
                </div>

                <div class="reports-grid">
                    <div class="report-card">
                        <div class="report-icon occupancy">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="report-content">
                            <h3>Occupancy Rate</h3>
                            <div class="stat-large" id="occupancy-rate">0%</div>
                            <div class="stat-detail">
                                <span><i class="fas fa-bed"></i> Kamar Terisi: <span id="occupied-rooms-report">0</span></span>
                                <span><i class="fas fa-home"></i> Total Kamar: <span id="total-rooms">0</span></span>
                            </div>
                        </div>
                    </div>

                    <div class="report-card">
                        <div class="report-icon revenue">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                        <div class="report-content">
                            <h3>Revenue per Room</h3>
                            <div class="stat-large" id="revpar">Rp 0</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Data Management Section -->
            <section id="data" class="tab-content">
                <div class="module-header">
                    <h2><i class="fas fa-database"></i> Data Management</h2>
                    <div class="module-actions">
                        <button class="btn btn-info" onclick="checkDatabaseStatus()">
                            <i class="fas fa-sync-alt"></i> Refresh Status
                        </button>
                    </div>
                </div>

                <div class="data-grid">
                    <div class="data-card">
                        <div class="data-icon backup">
                            <i class="fas fa-download"></i>
                        </div>
                        <div class="data-content">
                            <h3>Backup & Restore</h3>
                            <p>Export dan import semua data dalam format JSON</p>
                            <div class="data-actions">
                                <button class="btn btn-primary" onclick="exportData()">
                                    <i class="fas fa-download"></i> Export Data
                                </button>
                                <button class="btn btn-secondary" onclick="document.getElementById('import-file').click()">
                                    <i class="fas fa-upload"></i> Import Data
                                </button>
                                <input type="file" id="import-file" accept=".json" style="display: none;" onchange="importData(this)">
                            </div>
                        </div>
                    </div>

                    <div class="data-card">
                        <div class="data-icon status">
                            <i class="fas fa-server"></i>
                        </div>
                        <div class="data-content">
                            <h3>Database Status</h3>
                            <div class="db-status">
                                <div class="status-item">
                                    <i class="fas fa-wifi"></i>
                                    <span>Status: <strong id="db-status">Connected</strong></span>
                                </div>
                                <div class="status-item">
                                    <i class="fas fa-cog"></i>
                                    <span>Mode: <strong id="db-mode">IndexedDB</strong></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal for confirmations -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Konfirmasi</h3>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body">
                <p id="modal-message">Apakah Anda yakin?</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="modal-confirm">Ya</button>
                <button class="btn btn-secondary" onclick="closeModal()">Batal</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/database.js"></script>
    <script src="js/booking.js"></script>
    <script src="js/payment.js"></script>
    <script src="js/finance.js"></script>
    <script src="js/advanced-features.js"></script>
    <script src="js/reports-housekeeping.js"></script>
    <script src="js/print.js"></script>
    <script src="js/modern-navigation.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
